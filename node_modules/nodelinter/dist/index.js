#!/usr/bin/env node
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.masterConfig = exports.isNotTestRun = void 0;
var fs_1 = __importDefault(require("fs"));
var lintAll_1 = require("./scripts/lintAll");
var lintOne_1 = require("./scripts/lintOne");
var utils_1 = require("./utils");
var constants_1 = require("./constants");
var ConfigManager_1 = require("./services/ConfigManager");
exports.isNotTestRun = process.argv[1].split("/").pop() !== "jest";
var configManager = new ConfigManager_1.ConfigManager(process.argv.slice(2));
var masterConfig = configManager.masterConfig, printLogs = configManager.printLogs;
exports.masterConfig = masterConfig;
if (exports.isNotTestRun) {
    var symlink = void 0;
    try {
        symlink = fs_1.default.lstatSync(masterConfig.target);
    }
    catch (error) {
        utils_1.terminate(constants_1.ERRORS.FAILED_TO_FIND_TARGET_AT_PATH);
    }
    symlink.isDirectory()
        ? lintAll_1.lintAll(masterConfig, { printLogs: printLogs })
        : lintOne_1.lintOne(masterConfig, { printLogs: printLogs });
}
